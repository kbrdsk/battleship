!function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",a=t[3];if(!a)return n;if(e&&"function"==typeof btoa){var r=(i=a,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[n].concat(o).concat([r]).join("\n")}var i,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(a)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);a&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){"use strict";n.r(e);n(2);n(5)()},function(t,e,n){var a=n(3),r=n(4);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);t.exports=r.locals||{}},function(t,e,n){"use strict";var a,r=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function s(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},a=[],r=0;r<t.length;r++){var o=t[r],c=e.base?o[0]+e.base:o[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var d=s(l),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(i[d].references++,i[d].updater(p)):i.push({identifier:l,updater:b(p,e),references:1}),a.push(l)}return a}function u(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var r=n.nc;r&&(a.nonce=r)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var l,d=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function p(t,e,n,a){var r=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var o=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function f(t,e,n){var a=n.css,r=n.media,o=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var h=null,m=0;function b(t,e){var n,a,r;if(e.singleton){var o=m++;n=h||(h=u(e)),a=p.bind(null,n,o,!1),r=p.bind(null,n,o,!0)}else n=u(e),a=f.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<n.length;a++){var r=s(n[a]);i[r].references--}for(var o=c(t,e),u=0;u<n.length;u++){var l=s(n[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=o}}}},function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a)()(!1);r.push([t.i,"body{\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\nbody[attacking=true]{\n\tpointer-events: none;\n}\n\nbutton{\n\tborder: none;\n\tpadding: .5em 1em;\n}\n\n.new-game-button{\n\n}\n\n.board-container{\n\tdisplay: grid;\n\tgrid-template-rows: repeat(10, 1fr);\n\tgrid-template-columns: repeat(10, 1fr);\n\tgrid-gap: 3px;\n\theight: min(500px, 80vw);\n\twidth: min(500px, 80vw);\n}\n\n.board-square{\n\tbackground-color: blue;\n}\n\n.ship-placement-indicator{\n\tbackground-color: violet;\n}\n\nbody[phase=shipPlacement] .ship-indicator{\n\tbackground-color: purple;\n}\n\n.next-button{\n\n}\n\n.board-square[hit-status=miss]{\n\tbackground-color: grey;\n}\n\n.board-square[hit-status=hit]{\n\tbackground-color: red;\n}\n\n.board-square[hit-status=sunk]{\n\tbackground-color: black;\n}",""]),e.default=r},function(t,e,n){const a=n(6),r=(()=>{const t=a.newGameButton;return t.textContent="New Game",t.addEventListener("click",u),t.classList.add("new-game-button"),t})(),o=()=>{const t=a.nextButton;return t.addEventListener("click",u),t.textContent="Next",t.classList.add("next-button"),t},i={newGame:function(){document.body.appendChild(r)},playerCreation:function(){const t=document.createElement("div"),e=["defaultAI","human"];for(let n of a.playerTypeSelection)n.textContent=e.pop(),n.classList.add("player-type-selection-button"),t.appendChild(n);document.body.appendChild(a.playerNameInput),document.body.appendChild(t),document.body.appendChild(o())},shipPlacement:function(){d(),document.body.appendChild(o())},turn:function(){if(d(),"defaultAI"===a.gameState[a.activePlayer].playerType&&"turn"===a.phase){const t=a.activeBoard;a.submitAttack(),y(t)}},gameOver:function(){alert("Game Over!\n"+a.gameState[s].playerName+" wins!"),document.body.appendChild(r)}};let s,c;function u(){document.body.innerHTML="",document.body.setAttribute("phase",a.phase),c="firstPlayer"===a.activePlayer?"secondPlayer":"firstPlayer",s=a.activePlayer,i[a.phase](),console.log(a.phase)}function l(t){t.map((e,n)=>{e.map((e,r)=>{e.classList.add("board-square"),e.addEventListener("click",()=>{"turn"!==a.phase&&"gameOver"!==a.phase||y(t)}),e.addEventListener("mousedown",()=>{"shipPlacement"===a.phase&&(!function(t,e){p=[t,e],f=!0,h()}(n,r),h(n,r))}),e.addEventListener("mouseup",()=>{"shipPlacement"===a.phase&&f&&m()}),e.addEventListener("mouseenter",()=>{"shipPlacement"===a.phase&&h(n,r)})})}),t.initialized=!0}function d(){const t=a.activeBoard;t.initialized||l(t);const e=document.createElement("div");e.classList.add("board-container"),t.map(t=>{t.map(t=>{e.appendChild(t)})}),document.body.appendChild(e)}let p=[],f=!1;function h(t,e){if(b(),f){const n=t-p[0],r=e-p[1],o=Math.abs(n)<Math.abs(r)?1:0,i=Math.abs(n)<Math.abs(r)?r:n,s=Math.abs(i),c=i/Math.abs(i);let u=[...p];for(let t=0;t<=s;t++){const t=a.activeBoard[u[0]][u[1]];if(t.classList.contains("ship-indicator"))break;t.classList.add("ship-placement-indicator"),u[o]+=c}}}function m(){p=[],f=!1,a.activeBoard.map(t=>t.map(t=>{t.classList.contains("ship-placement-indicator")&&t.classList.add("ship-indicator")})),b()}function b(){a.activeBoard.map(t=>{t.map(t=>{t.classList.remove("ship-placement-indicator")})})}function y(t){document.body.setAttribute("attacking",!0),t.map((t,e)=>t.map((t,n)=>{t.setAttribute("hit-status",a.gameState[c].gameboard.boardState[e][n].hitStatus)})),setTimeout(()=>{document.body.setAttribute("attacking",!1),u()},1500)}document.addEventListener("mouseup",()=>{"shipPlacement"===a.phase&&f&&(b(),m())}),t.exports=u},function(t,e,n){const{startGame:a,initializePlayer:r,placeShips:o,turn:i,gameOver:s}=n(7);let c,u,l,d,p;const f=new Map([[a,{nextFunction:g,phaseName:"newGame"}],[r,{nextFunction:function(){r(d,p,c,m.value,[10,10],10),y.set(p,C(10,10)),m.value="",c=null,"firstPlayer"===p?(p="secondPlayer",l=r,M()):"secondPlayer"===p&&(p="firstPlayer",l=o,M())},phaseName:"playerCreation"}],[o,{nextFunction:S,phaseName:"shipPlacement"}],[i,{nextFunction:L,phaseName:"turn"}],[s,{nextFunction:g,phaseName:"gameOver"}]]),h=document.createElement("button");h.addEventListener("click",g);const m=document.createElement("input"),b=[k("human"),k("defaultAI")],y=new Map([[null,null],["firstPlayer",null],["secondPlayer",null]]);function v(){y.set("firstPlayer",null),y.set("secondPlayer",null),c=null,u=null,m.value="",l=a,d={},p=null}function g(){d={},a(d),l=r,M(),p="firstPlayer"}function S(){o(d,d[p],x),x=[],"firstPlayer"===p?(p="secondPlayer",M()):"secondPlayer"===p&&(p="firstPlayer",l=i,M())}let P;v();let x=[];function w(t,e){const n=t-P[0],a=e-P[1],r=Math.abs(n)<Math.abs(a)?1:0,o=Math.abs(n)<Math.abs(a)?a:n,i=Math.abs(o),s=o/Math.abs(o);!function(t,e,n,a){const r=[t];let o=[...t];for(let t=0;t<e&&(o=[...o],o[n]+=a,!x.some(t=>t.some(t=>t[0]===o[0]&&t[1]===o[1])));t++)r.push(o);x.push(r)}(P,i,r,s)}function L(t,e){try{i(d,d[p],[t,e])===s?l=s:p="firstPlayer"===p?"secondPlayer":"firstPlayer"}catch(t){if("Game is over"!==t&&"Square has already been attacked"!==t)throw t}}function M(){u=document.createElement("button"),u.addEventListener("click",f.get(l).nextFunction),l===o&&"defaultAI"===d[p].playerType&&S()}function k(t){const e=document.createElement("button");return e.addEventListener("click",()=>{c=t}),e}function C(t,e){const n=[];for(let a=0;a<t;a++){n.push([]);for(let t=0;t<e;t++)n[a][t]=O(a,t)}return n}function O(t,e){const n=document.createElement("div");return Object.assign(n,{x:t,y:e}),n.addEventListener("click",()=>{l===i&&L(t,e)}),n.addEventListener("mouseup",()=>{l===o&&w(t,e)}),n.addEventListener("mousedown",()=>{l===o&&(P=[t,e])}),n}t.exports={newGameButton:h,get activeBoard(){return y.get(p)},get phase(){return f.get(l).phaseName},playerNameInput:m,playerTypeSelection:b,get nextButton(){return u},get gameState(){return d},get activePlayer(){return p},reset:v,submitAttack:L}},function(t,e){const n={hit:function(){return this.hitCounter<this.length&&(this.hitCounter++,!0)},get isSunk(){return this.hitCounter>=this.length}};function a(t){if(isNaN(t)||t<1)throw"Must specify a valid length";const e=Object.create(n);return e.hitCounter=0,e.length=t,e}const r={hit:function(){}},o={placeShip:function(t,e=a(t.length)){for(let n of t){let t=this.getSquare(n);if(t.ship!==r)throw"Overlapping ships";t.ship=e}this.shipList.push(e)},get gameOver(){return this.shipList.every(t=>t.isSunk)},receiveAttack:function(t){if(this.gameOver)throw"Game is over";let e=this.getSquare(t);if(e.hitStatus)throw"Square has already been attacked";return e.ship.hit(),e.ship===r?e.hitStatus="miss":e.hitStatus="hit",s.call(this),e.hitStatus},getSquare:function(t){return this.board[t[0]][t[1]]},get boardState(){return this.board}};function i(t,e){let n=new Array(t).fill(null).map(()=>new Array(e).fill(null).map(()=>Object.create({hitStatus:null,ship:r}))),a=Object.create(o);return a.board=n,a.shipList=[],a}function s(){for(let t of this.board)for(let e of t)e.ship.isSunk&&(e.hitStatus="sunk")}const c={human:()=>t=>t,defaultAI:function(t){let e,n,a,r,o=1;t.map((i,s)=>i.map((i,c)=>{if(null===i.hitStatus){r=[s,c];const i=function(t,e,n){const a=[];for(let[r,o]of d)t[e+r]&&t[e+r][n+o]?a.push(t[e+r][n+o].hitStatus):a.push("OOB");return a}(t,s,c);if(i.some(t=>null===t)){const e=i.map((e,n)=>{const[a,r]=d[n];let o=1,[i,u]=[s,c];for(;t[i+a]&&t[i+a][u+r]&&null===t[i+a][u+r].hitStatus;)o++,i+=a,u+=r;return o}).reduce((t,e)=>t*e);e>o&&(o=e,a=[s,c])}i.some(t=>"hit"===t)&&i.map((a,r)=>{if("hit"===a){n=[s,c];const[a,o]=d[r].map(t=>2*t);t[s+a]&&t[s+a][c+o]&&"hit"===t[s+a][c+o].hitStatus&&(e=[s,c])}})}}));const i=e||n||a||r;return()=>i}},u={human:()=>{},defaultAI:function([t,e]){const n=[];for(let a of[5,4,3,3,2]){const r=p(t,e,a,n),o=Math.floor(2*Math.random()),i=["horizontal","vertical"][o],s=Math.floor(Math.random()*r[i].length),c=r[i][s],u=[];for(let t=0;t<a;t++){const e=[...c];e[o]+=t,u.push(e)}n.push(u)}return n}};function l(t,e){return{playerName:e,playerType:t,launchAttack:c[t],generateShipLocations:u[t]}}const d=[[1,0],[0,-1],[-1,0],[0,1]];function p(t,e,n,a){const r=a.flatMap(t=>t),o={horizontal:[],vertical:[]};for(let a=0;a<t;a++){const t=r.filter(t=>t[0]===a).map(t=>t[1]);for(let r=0;r<e-n;r++)t.every(t=>t<r||t>r+n-1)&&o.vertical.push([a,r])}for(let a=0;a<e;a++){const e=r.filter(t=>t[1]===a).map(t=>t[0]);for(let r=0;r<t-n;r++)e.every(t=>t<r||t>r+n-1)&&o.horizontal.push([r,a])}return o}function f(t={}){return(...e)=>h(t,"firstPlayer",...e)}function h(t,e,n,a,r,o){return t[e]=l(n,a),t[e].gameboard=i(...r),t[e].shipCount=o,"firstPlayer"===e?(...e)=>h(t,"secondPlayer",...e):(...e)=>m(t,t.firstPlayer,...e)}function m(t,e,n){"defaultAI"!==e.playerType||n&&0!==n.length||(n=e.generateShipLocations([10,10]));for(let t of n)e.gameboard.placeShip(t);return e===t.firstPlayer?(...e)=>m(t,t.secondPlayer,...e):(...e)=>b(t,t.firstPlayer,...e)}function b(t,e,n){const a=e===t.firstPlayer?t.secondPlayer:t.firstPlayer,r=a.gameboard.boardState;return a.gameboard.receiveAttack(e.launchAttack(r)(n)),a.gameboard.gameOver?y:(...e)=>b(t,a,...e)}function y(t){return t?f:y}t.exports={buildGameboard:i,buildShip:a,createPlayer:l,startGame:f,initializePlayer:h,placeShips:m,turn:b,gameOver:y,nullShip:r}}]);